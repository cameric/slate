<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>8Weike API Doc</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #151515;
  background-color: #ac4142;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #505050;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #d0d0d0;
}
.highlight .p, .highlight .pi {
  color: #d0d0d0;
}
.highlight .gi {
  color: #90a959;
}
.highlight .gd {
  color: #ac4142;
}
.highlight .gh {
  color: #6a9fb5;
  background-color: #151515;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #aa759f;
}
.highlight .kc {
  color: #d28445;
}
.highlight .kt {
  color: #d28445;
}
.highlight .kd {
  color: #d28445;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #90a959;
}
.highlight .sr {
  color: #75b5aa;
}
.highlight .si {
  color: #8f5536;
}
.highlight .se {
  color: #8f5536;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #6a9fb5;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #90a959;
}
.highlight .ss {
  color: #90a959;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;http&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="http">http</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>Welcome to the 8Weike API!</p>

<p><strong>Important Note:</strong></p>

<p>In production environment, all API request should be sent to:</p>

<p><code class="prettyprint">
https://oav0gkqdmk.execute-api.us-east-1.amazonaws.com/prod
</code></p>

<p>In dev/test, API requests should be sent to:</p>

<p><code class="prettyprint">
https://oav0gkqdmk.execute-api.us-east-1.amazonaws.com/test
</code></p>

<p>In the future, once we acquire an SSL certificate, we will setup a 
custom domain name so that we could use a more symbolic api server name.</p>

<p>Note that the <code class="prettyprint">host:</code> for each endpoint below signifies which server
handles the request. However, <strong>DO NOT send request directly to server!</strong>
Always use the API gateway above.</p>

<h1 id="credential">Credential</h1>

<h2 id="login-using-cellphone-number">Login using cellphone number</h2>
<pre class="highlight http"><code><span class="nf">POST</span> <span class="nn">/login/phone</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">http://8weike.com    </span>
</code></pre>

<blockquote>
<p>JSON response with error:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"error"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"statusCode"</span><span class="p">:</span><span class="w"> </span><span class="mi">401</span><span class="p">,</span><span class="w">
    </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"User doesn't exist!"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"credential"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>JSON response with no error:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"error"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"credential"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nt">"profileId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
  </span><span class="p">}</span><span class="w">    
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint logs in the user with phone as credential.</p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>phone</td>
<td>string</td>
<td>null</td>
<td>The cellphone number</td>
</tr>
<tr>
<td>password</td>
<td>string</td>
<td>null</td>
<td>User password</td>
</tr>
</tbody></table>

<h3 id="error-codes">Error codes</h3>

<ul>
<li>401 if user provides invalid credential</li>
<li>400 for all other errors</li>
</ul>

<h2 id="login-using-wechat-credential">Login using WeChat credential</h2>
<pre class="highlight http"><code><span class="nf">POST</span> <span class="nn">/login/wechat</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">http://8weike.com </span>
</code></pre>

<p>This endpoint logs in a user with WeChat credential</p>

<aside class="warning">
Not implemented yet
</aside>

<h2 id="login-using-weibo-credential">Login using Weibo credential</h2>
<pre class="highlight http"><code><span class="nf">POST</span> <span class="nn">/login/weibo</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">http://8weike.com </span>
</code></pre>

<p>This endpoint logs in a user with Weibo credential</p>

<aside class="warning">
Not implemented yet
</aside>

<h2 id="check-login-status">Check login status</h2>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/login</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">http://8weike.com    </span>
</code></pre>

<blockquote>
<p>JSON response if logged in:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">  
  </span><span class="nt">"statusCode"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">    
  </span><span class="nt">"credential"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>JSON response if not logged in:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">  
  </span><span class="nt">"statusCode"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">    
  </span><span class="nt">"credential"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Check if the user has logged in and retrieve credential ID if so</p>

<h2 id="signup-web-only">Signup (Web only)</h2>
<pre class="highlight http"><code><span class="nf">POST</span> <span class="nn">/signup/phone/web</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">http://8weike.com    </span>
</code></pre>

<blockquote>
<p>JSON response if error occurred:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"error"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"statusCode"</span><span class="p">:</span><span class="w"> </span><span class="mi">400</span><span class="p">,</span><span class="w">
    </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"User already exists!"</span><span class="w">
  </span><span class="p">}</span><span class="w">  
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Web-only signup endpoint with cellphone. It will send a TFA code to phone.</p>

<aside class="warning">
Note: This endpoint involves string-based Captcha check so it&rsquo;s not suitable for mobile environment.
</aside>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>phone</td>
<td>string</td>
<td>null</td>
<td>The cellphone number for the new user</td>
</tr>
<tr>
<td>password</td>
<td>string</td>
<td>null</td>
<td>User password</td>
</tr>
<tr>
<td>captcha</td>
<td>string</td>
<td>null</td>
<td>The user-input of the captcha image</td>
</tr>
<tr>
<td>hash</td>
<td>string</td>
<td>null</td>
<td>The original bcrypted hash that corresponds to the actual captcha value</td>
</tr>
</tbody></table>

<h3 id="error-codes">Error codes</h3>

<ul>
<li>400 if one of the following scenarios occurs:

<ul>
<li>Incorrect captcha</li>
<li>Credential already exists in database</li>
</ul></li>
<li>500 if one of the following scenarios occurs:

<ul>
<li>Error occurred in the process of sending TFA code</li>
<li>Error occurred during session saving</li>
</ul></li>
</ul>

<h2 id="signup-mobile-only">Signup (Mobile only)</h2>
<pre class="highlight http"><code><span class="nf">POST</span> <span class="nn">/signup/phone/mobile</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">http://8weike.com    </span>
</code></pre>

<blockquote>
<p>JSON response if error occurred:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"error"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"statusCode"</span><span class="p">:</span><span class="w"> </span><span class="mi">400</span><span class="p">,</span><span class="w">
    </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"User already exists!"</span><span class="w">
  </span><span class="p">}</span><span class="w">  
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Mobile-only signup endpoint with cellphone. It will send a TFA code to phone.</p>

<aside class="warning">
Note: This endpoint does not go through Captcha check so it&rsquo;s not suitable for web.
</aside>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>phone</td>
<td>string</td>
<td>null</td>
<td>The cellphone number for the new user</td>
</tr>
<tr>
<td>password</td>
<td>string</td>
<td>null</td>
<td>User password</td>
</tr>
</tbody></table>

<h3 id="error-codes">Error codes</h3>

<ul>
<li>400 if Credential already exists in database<br></li>
<li>500 if one of the following scenarios occurs:

<ul>
<li>Error occurred in the process of sending TFA code</li>
<li>Error occurred during session saving</li>
</ul></li>
</ul>

<h2 id="signup-verify">Signup verify</h2>
<pre class="highlight http"><code><span class="nf">POST</span> <span class="nn">/signup/verify</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">http://8weike.com    </span>
</code></pre>

<blockquote>
<p>JSON response if error occurred:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"error"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"statusCode"</span><span class="p">:</span><span class="w"> </span><span class="mi">400</span><span class="p">,</span><span class="w">
    </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Code is incorrect!"</span><span class="w">
  </span><span class="p">},</span><span class="w">  
  </span><span class="nt">"credential"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>JSON response if no error:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"error"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"credential"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Verify the TFA code and save user credential into database       </p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>string</td>
<td>null</td>
<td>The user-input TFA code</td>
</tr>
</tbody></table>

<h3 id="error-codes">Error codes</h3>

<ul>
<li>400 if one of the following scenarios occurs:

<ul>
<li>User is not pending signup</li>
<li>TFA code is incorrect<br></li>
</ul></li>
<li>500 if other error occurred</li>
</ul>

<h1 id="profile">Profile</h1>

<h2 id="create-profile">Create profile</h2>
<pre class="highlight http"><code><span class="nf">POST</span> <span class="nn">/profiles</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">http://8weike.com    </span>
</code></pre>

<blockquote>
<p>JSON response if error occurred:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"error"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"statusCode"</span><span class="p">:</span><span class="w"> </span><span class="mi">400</span><span class="p">,</span><span class="w">
    </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Error occurred!"</span><span class="w">
  </span><span class="p">},</span><span class="w">  
  </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>JSON response if no error:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"error"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"profileId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Create a new profile and associate the login credential with it</p>

<aside class="success">
This endpoint requires that the user has logged in
</aside>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>nickname</td>
<td>string</td>
<td>null</td>
<td>the nickname for the profile</td>
</tr>
</tbody></table>

<h3 id="error-codes">Error codes</h3>

<p>400 if error occurred in the middle of creating the profile</p>

<h2 id="retrieve-the-profile-of-the-currently-logged-in-user">Retrieve the profile of the currently logged in user</h2>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/profiles/me</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">http://8weike.com    </span>
</code></pre>

<blockquote>
<p>JSON response if error occurred:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"error"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"statusCode"</span><span class="p">:</span><span class="w"> </span><span class="mi">400</span><span class="p">,</span><span class="w">
    </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Error occurred!"</span><span class="w">
  </span><span class="p">},</span><span class="w">  
  </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>JSON response if no error:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"error"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"nickname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cam"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CEO of Cameric"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"avatar"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FGHSDF8R82DFSFHDS"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"[other fields]"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Retrieve the full representation of the profile of currently logged in user</p>

<aside class="success">
This endpoint requires that the user has logged in
</aside>

<aside class="warning">
The response is NOT complete! Will fill in more information as more features are built
</aside>

<h3 id="error-codes">Error codes</h3>

<p>400 if error occurred in the middle of retrieving the profile</p>

<h2 id="retrieve-the-profile-of-a-user">Retrieve the profile of a user</h2>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/profiles/:profile_id</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">http://8weike.com</span>
</code></pre>

<blockquote>
<p>JSON response if error occurred:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"error"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"statusCode"</span><span class="p">:</span><span class="w"> </span><span class="mi">400</span><span class="p">,</span><span class="w">
    </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Error occurred!"</span><span class="w">
  </span><span class="p">},</span><span class="w">  
  </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>JSON response if no error:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"error"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"nickname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tony"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Engineer of Cameric"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"avatar"</span><span class="p">:</span><span class="w"> </span><span class="s2">"efhuwehu23ur32iu"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"[other fields]"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Retrieve the full representation of a profile of user passed in as the url param</p>

<aside class="warning">
The response is NOT complete! Will fill in more information as more features are built
</aside>

<h3 id="error-codes">Error codes</h3>

<p>400 if error occurred in the middle of retrieving the profile</p>

<h1 id="post">Post</h1>

<h2 id="create-a-new-post">Create a new post</h2>
<pre class="highlight http"><code><span class="nf">POST</span> <span class="nn">/posts</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">http://8weike.com    </span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">multipart/form-data</span>
</code></pre>

<blockquote>
<p>JSON response if error occurred:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"error"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"statusCode"</span><span class="p">:</span><span class="w"> </span><span class="mi">400</span><span class="p">,</span><span class="w">
    </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Error occurred!"</span><span class="w">
  </span><span class="p">},</span><span class="w">  
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>JSON response if no error:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"error"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Create a new post with corresponding media resources. Note that each media resource cannot exceed 5MB
and only up to 10 media files could be uploaded for each post.</p>

<p>The Id of the new post will be returned as response in order to fetch the post data later.</p>

<aside class="success">
This endpoint requires that the user has logged in
</aside>

<aside class="warning">
The request MUST BE sent with the header `Content-Type: multipart/form-data`. Otherwise the post will not
be created!
</aside>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>title</td>
<td>string</td>
<td>null</td>
<td>the title of the post (required!)</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>null</td>
<td>the description of the post content</td>
</tr>
<tr>
<td>media</td>
<td>array</td>
<td>[]</td>
<td>an array of media data (each media resource cannot exceed 5MB)</td>
</tr>
</tbody></table>

<h3 id="error-codes">Error codes</h3>

<p>400 if error occurred in the middle of creating the profile</p>

<h2 id="retrieve-posts-for-a-given-profile-not-implemented-yet">Retrieve posts for a given profile (not implemented yet)</h2>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/profiles/:profile_id/posts</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">http://8weike.com</span>
</code></pre>

<blockquote>
<p>JSON response if error:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"error"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"statusCode"</span><span class="p">:</span><span class="w"> </span><span class="mi">400</span><span class="p">,</span><span class="w">
    </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Error occurred!"</span><span class="w">
  </span><span class="p">},</span><span class="w">  
  </span><span class="nt">"limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nt">"post"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">  
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>JSON response if no error:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"error"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
  </span><span class="nt">"posts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Photography"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"this is fucking beautiful"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-11-16 23:59:59"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"media"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NatGeo03"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://8weike-media.s3.amazonaws.com/1/4/0e9f75298af881b5c570d5c6ecbf3ad22da63fc0-NatGeo03.jpg"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NatGeo04"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://8weike-media.s3.amazonaws.com/1/4/ecb3fbb68e118cdf7a1f05c7424da03d2b76dd5f-NatGeo04.jpg"</span><span class="w">
        </span><span class="p">}</span><span class="w">      
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">  
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Retrieve a subset of posts for a given user. Note that a page number needs to be provided
for pagination. If not provided then start from beginning. By default, the post will be
ordered by created date. A <code class="prettyprint">sort</code> parameter could be specified to sort by other fields.</p>

<p>Note that the response of this request will return the limit of the previous request.</p>

<h3 id="url-parameters">Url Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>page</td>
<td>integer</td>
<td>null</td>
<td>the current page number</td>
</tr>
<tr>
<td>limit</td>
<td>integer</td>
<td>10</td>
<td>the number of posts for this request</td>
</tr>
<tr>
<td>sort</td>
<td>string</td>
<td>null</td>
<td>the field to be sorted by</td>
</tr>
</tbody></table>

<h3 id="example-request">Example request</h3>

<p><code class="prettyprint">
GET /profiles/1/posts?page=1&amp;limit=10
</code></p>

<h2 id="retrieve-a-post">Retrieve a post</h2>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/posts/:post_id</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">http://8weike.com</span>
</code></pre>

<blockquote>
<p>JSON response if error occurred:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"error"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"statusCode"</span><span class="p">:</span><span class="w"> </span><span class="mi">400</span><span class="p">,</span><span class="w">
    </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Error occurred!"</span><span class="w">
  </span><span class="p">},</span><span class="w">  
  </span><span class="nt">"post"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>JSON response if no error:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"error"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"post"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Photography"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"this is fucking beautiful"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-11-16 23:59:59"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"media"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NatGeo03"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://8weike-media.s3.amazonaws.com/1/4/0e9f75298af881b5c570d5c6ecbf3ad22da63fc0-NatGeo03.jpg"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NatGeo04"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://8weike-media.s3.amazonaws.com/1/4/ecb3fbb68e118cdf7a1f05c7424da03d2b76dd5f-NatGeo04.jpg"</span><span class="w">
      </span><span class="p">}</span><span class="w">      
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Retrieve the content of a post and the media metadata that associates with this post</p>

<p>No url parameter needed except the post id.</p>

<h3 id="error-codes">Error codes</h3>

<p>400 if error occurred in the middle of creating the profile</p>

<h1 id="locale">Locale</h1>

<h2 id="get-locale-code">Get locale code</h2>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/locale</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">http://8weike.com    </span>
</code></pre>

<blockquote>
<p>No response for this endpoint, only status code</p>
</blockquote>

<p>Get the current locale code if stored in the session. Otherwise the default locale code (<code class="prettyprint">zh-CN</code>) is returned.</p>

<h2 id="set-locale-code">Set locale code</h2>
<pre class="highlight http"><code><span class="nf">POST</span> <span class="nn">/locale</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">http://8weike.com    </span>
</code></pre>

<blockquote>
<p>No response for this endpoint, only status code</p>
</blockquote>

<p>Save the locale into session</p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>locale</td>
<td>string</td>
<td>null</td>
<td>the new locale code</td>
</tr>
</tbody></table>

<h1 id="utility">Utility</h1>

<h2 id="get-captcha-image-web-only">Get Captcha image (Web only)</h2>
<pre class="highlight http"><code><span class="nf">POST</span> <span class="nn">/captcha</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">http://8weike.com    </span>
</code></pre>

<blockquote>
<p>JSON response if error occurred:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"error"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"statusCode"</span><span class="p">:</span><span class="w"> </span><span class="mi">400</span><span class="w">    
  </span><span class="p">},</span><span class="w">  
  </span><span class="nt">"captcha"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>JSON response if no error:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"error"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"captcha"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RUWREWHNBFSD9784324AER82IUQY23FAS4323RASFAEWD"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"picture"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="mi">14</span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Get a captcha image data and hash</p>

<aside class="warning">
This endpoint is not suitable for mobile since string-based captcha is not mobile-friendly
</aside>

<h3 id="error-codes">Error codes</h3>

<p>400 if error occurred in the middle of retrieving captcha data</p>

<h2 id="get-global-info">Get global info</h2>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/global_info</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">http://8weike.com    </span>
</code></pre>

<blockquote>
<p>JSON response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"global_info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"company"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cameric"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"v1"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Get server-side information about the company and product</p>

<aside class="success">
Note: this endpoint can be used to test the status of API server
</aside>

          <h1 id="errors">Errors</h1>

<aside class="notice">This error section is stored in a separate file in `includes/_errors.md`. Slate allows you to optionally separate out your docs into many files&hellip;just save them to the `includes` folder and add them to the top of your `index.md`&rsquo;s frontmatter. Files are included in the order listed.</aside>

<p>The Kittn API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request &ndash; Your request sucks</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized &ndash; Your API key is wrong</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden &ndash; The kitten requested is hidden for administrators only</td>
</tr>
<tr>
<td>404</td>
<td>Not Found &ndash; The specified kitten could not be found</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed &ndash; You tried to access a kitten with an invalid method</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable &ndash; You requested a format that isn&rsquo;t json</td>
</tr>
<tr>
<td>410</td>
<td>Gone &ndash; The kitten requested has been removed from our servers</td>
</tr>
<tr>
<td>418</td>
<td>I&rsquo;m a teapot</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests &ndash; You&rsquo;re requesting too many kittens! Slow down!</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error &ndash; We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable &ndash; We&rsquo;re temporarially offline for maintanance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="http">http</a>
          </div>
      </div>
    </div>
  </body>
</html>
